!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=10)}({0:function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction fetchData(data, method, route, success) {\r\n    fetch(route, {\r\n        method: method,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n    })\r\n        .then((res) => {\r\n        success(res);\r\n    })\r\n        .catch((error) => {\r\n        console.log(error);\r\n    });\r\n}\r\nexports.default = fetchData;\r\n\n\n//# sourceURL=webpack:///./src/client/js/fetchData.ts?")},10:function(module,exports,__webpack_require__){"use strict";eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fetchData_ts_1 = __importDefault(__webpack_require__(0));\r\nlet welcomeTxt = document.querySelector('.welcome-txt');\r\nlet submitSignin = document.querySelector('.btn-user');\r\nif (sessionStorage.rggd) {\r\n    welcomeTxt.innerHTML = atob(sessionStorage.rggd); //decode from base64\r\n}\r\nsubmitSignin.onclick = function () {\r\n    let email = document.querySelector('input[type=email]').value;\r\n    let password = document.querySelector('input[type=password]').value;\r\n    let user = {\r\n        email,\r\n        password\r\n    };\r\n    fetchData_ts_1.default(user, 'POST', '/users/signin', postAuth);\r\n};\r\nfunction postAuth(res) {\r\n    let fields = document.querySelectorAll('input');\r\n    let username;\r\n    if (res.status === 200) {\r\n        Promise.resolve(res.json()).then((data) => {\r\n            username = data;\r\n            localStorage.un = username;\r\n            window.location.replace('/');\r\n        });\r\n    }\r\n    if (res.status === 401) { //user doesn't exist\r\n        Promise.resolve(res.json()).then((data) => {\r\n            let wrong = data;\r\n            for (let field of fields) { //or missing[field] for es5\r\n                if (wrong.includes(field.type)) {\r\n                    field.style.borderColor = 'red';\r\n                    let tooltipTxt = field.parentNode.getAttribute('data');\r\n                    field.parentNode.setAttribute('data-tooltip', tooltipTxt);\r\n                }\r\n                else {\r\n                    field.parentNode.removeAttribute('data-tooltip');\r\n                    field.style.borderColor = '#CFD8DC';\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if (res.status === 422) { //missing data\r\n        Promise.resolve(res.json()).then((data) => {\r\n            let missing = data;\r\n            for (let field of fields) { //or missing[field] for es5\r\n                if (missing.includes(field.type)) {\r\n                    field.parentNode.removeAttribute('data-tooltip');\r\n                    field.style.borderColor = 'red';\r\n                }\r\n                else {\r\n                    field.style.borderColor = '#CFD8DC';\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/client/js/auth.ts?")}});